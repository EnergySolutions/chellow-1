<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
      "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Copyright 2005-2013 Wessex Water Limited This file is part of Chellow. 
	Chellow is free software; you can redistribute it and/or modify it under 
	the terms of the GNU General Public License as published by the Free Software 
	Foundation; either version 2 of the License, or (at your option) any later 
	version. Chellow is distributed in the hope that it will be useful, but WITHOUT 
	ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS 
	FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. 
	You should have received a copy of the GNU General Public License along with 
	Chellow; if not, write to the Free Software Foundation, Inc., 51 Franklin 
	St, Fifth Floor, Boston, MA 02110-1301 USA -->

<hibernate-mapping package="net.sf.chellow.billing">
	<class name="Bill" table="bill" lazy="true">
		<id name="id">
			<generator class="identity"/>
		</id>
		<many-to-one name="batch" class="Batch" column="batch_id"
			foreign-key="bill_batch_id_fkey" not-null="true"/>
		<many-to-one name="supply" class="net.sf.chellow.physical.Supply"
			column="supply_id" foreign-key="bill_supply_id_fkey" not-null="true"/>
		<property name="issueDate" type="timestamp" not-null="true"
			index="bill_issue_date_idx">
			<column name="issue_date" sql-type="timestamp with time zone" />
		</property>
		<component name="startDate" class="net.sf.chellow.physical.HhStartDate">
			<property type="timestamp" name="date" index="bill_start_date_idx">
				<column name="start_date" sql-type="timestamp with time zone" />
			</property>
		</component>
		<component name="finishDate" class="net.sf.chellow.physical.HhStartDate">
			<property type="timestamp" name="date" index="bill_finish_date_idx">
				<column name="finish_date" sql-type="timestamp with time zone" />
			</property>
		</component>
		<property name="net" type="big_decimal">
			<column name="net" sql-type="numeric" not-null="true" />
		</property>
		<property name="vat" type="big_decimal">
			<column name="vat" sql-type="numeric" not-null="true" />
		</property>
		<property name="gross" type="big_decimal">
			<column name="gross" sql-type="numeric" not-null="true" />
		</property>
		<many-to-one name="type" class="BillType" column="bill_type_id"
			foreign-key="bill_bill_type_id_fkey" />
		<property name="kwh" type="big_decimal">
			<column name="kwh" sql-type="numeric" not-null="true" />
		</property>
		<property type="string" name="reference" column="reference"
			not-null="true" />
		<property type="string" name="account" column="account"
			not-null="true" />
		<property type="string" name="breakdown">
			<column name="breakdown" sql-type="text" not-null="true" />
		</property>
		<set name="reads" inverse="true" lazy="true" cascade="all,delete-orphan">
			<key column="bill_id" on-delete="cascade" />
			<one-to-many class="net.sf.chellow.physical.RegisterRead" />
		</set>
	</class>
</hibernate-mapping>

